import{a as d,_ as f,c as $}from"./client-CoSIhTpW.js";import{t as i}from"./index-BWPUmTLK.js";import{a as y}from"./Label.vue_vue_type_script_setup_true_lang-BjBcgqCZ.js";import{_ as h,a as v,d as x,b as k,c as F}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CoYiqVdQ.js";import{_ as R,a as T,b as w,c as S,d as C}from"./CardTitle.vue_vue_type_script_setup_true_lang-D_3rsHp5.js";import{a as N,t as P,F as B}from"./vee-validate-zod-CppCHWBl.js";import{_ as V}from"./TabulatorTable.vue_vue_type_script_setup_true_lang-CJSfjonO.js";import{R as q}from"./RoleSchema-_M9ZWCN2.js";import{_ as z,a as D,b as M,c as A}from"./FormMessage.vue_vue_type_script_setup_true_lang-DRP7AwgQ.js";import{d as E,A as p,n as G,a as O,e,w as s,u as t,z as U,F as j,o as H,b as u,h as m,l as I}from"./app-X6IBNoOp.js";import"./Primitive-CT1nwTPS.js";import"./useForwardExpose-ZrjDBdkd.js";import"./Label-CGd5L7Po.js";import"./useForwardPropsEmits-DCASyspC.js";import"./x-C1MsgDos.js";import"./createLucideIcon-g8sx4_0p.js";import"./utils-DSuOEapb.js";const J=["onSubmit"],K={class:"w-full flex gap-1"},fa=E({__name:"Role copy",setup(L){const o=p({data:[],loading:!0}),r=p(!1);G(async()=>{o.value.loading=!0;const l=await d.role.index();l.data&&(o.value.data=l.data.map(a=>({...a,actions:[{href:`/setting/role/${a.id}/edit`,button:{buttonType:"edit"}},{href:`/setting/role/${a.id}`,button:{buttonType:"delete"}}]}))),o.value.loading=!1});const _=[{field:"actions",headerSort:!1},{title:"Nama",field:"name",sorter:"string",headerFilter:"input",headerFilterPlaceholder:"Cari berdasarkan nama"}],c=P(q);async function g(l){i.loading("Role dalam penyimpanan...");try{const a=await d.role.store(l);a.data&&(i.success("Role berhasil disimpan"),o.value.data.unshift({...a.data,actions:[{href:`/setting/role/${a.data.id}`,button:{buttonType:"edit"}},{href:`/setting/role/${a.data.id}`,button:{buttonType:"delete"}}]}),r.value=!1)}catch(a){i.error("Gagal menyimpan role"),console.error(a)}setTimeout(()=>{i.dismiss()},3e3)}return(l,a)=>(H(),O(j,null,[e(t(B),{as:"","validation-schema":t(c),class:"flex flex-col gap-2"},{default:s(({handleSubmit:b})=>[e(t(h),{open:r.value,"onUpdate:open":a[0]||(a[0]=n=>r.value=n)},{default:s(()=>[e(t(v),{class:"2xl:max-w-[800px] max-h-[90dvh]"},{"dialog-title":s(()=>[e(t(k),null,{default:s(()=>a[2]||(a[2]=[m("Formulir Role")])),_:1}),e(t(F),{class:"overflow-auto"},{default:s(()=>a[3]||(a[3]=[u("p",{class:"text-sm font-light text-gray-500"}," Perubahan pada hak akses role akan mempengaruhi seluruh pengguna yang menggunakan role tersebut. ",-1)])),_:1})]),default:s(()=>[u("form",{id:"roleForm",onSubmit:n=>b(n,g)},[e(t(N),{name:"name"},{default:s(({componentField:n})=>[e(t(z),null,{default:s(()=>[e(t(D),{required:!0},{default:s(()=>a[4]||(a[4]=[m("Nama Role")])),_:1}),e(t(M),null,{default:s(()=>[e(t(y),I({type:"text"},n,{class:"border px-3 py-2 rounded-md",placeholder:"Masukkan Nama Role",autocomplete:"off",required:""}),null,16)]),_:2},1024),e(t(A))]),_:2},1024)]),_:1})],40,J),e(t(x),null,{default:s(()=>[e(f,{type:"submit",buttonType:"save",form:"roleForm"},{default:s(()=>a[5]||(a[5]=[m(" Simpan ")])),_:1})]),_:1})]),_:2},1024)]),_:2},1032,["open"])]),_:1},8,["validation-schema"]),e(t(C),{class:U(t($)("w-full",l.$attrs.class??""))},{default:s(()=>[e(t(R),null,{default:s(()=>[e(t(T),null,{default:s(()=>a[6]||(a[6]=[m("Role Pengguna")])),_:1}),e(t(w),null,{default:s(()=>[u("div",K,[a[7]||(a[7]=u("span",null,"Digunakan untuk mengatur hak akses pengguna terhadap fitur-fitur aplikasi.",-1)),e(f,{type:"button",buttonType:"add",href:"/setting/role/create",onClick:a[1]||(a[1]=()=>{r.value=!0})})])]),_:1})]),_:1}),e(t(S),{class:"grid gap-4"},{default:s(()=>[e(V,{usingFilter:!1,loading:o.value.loading,data:o.value.data,columns:_,id:"setting-role","tabulator-class":"!h-[400px]",options:{}},null,8,["loading","data"])]),_:1})]),_:1},8,["class"])],64))}});export{fa as default};
