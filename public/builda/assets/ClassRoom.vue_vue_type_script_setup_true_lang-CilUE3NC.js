import{a as u,_ as f,c as y}from"./client-CoSIhTpW.js";import{o as $,s as h,n as v,t as r}from"./index-BWPUmTLK.js";import{a as x}from"./Label.vue_vue_type_script_setup_true_lang-BjBcgqCZ.js";import{_ as k,a as F,d as w,b as T,c as C}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CoYiqVdQ.js";import{_ as R,a as S,b as K,c as M,d as N}from"./CardTitle.vue_vue_type_script_setup_true_lang-D_3rsHp5.js";import{a as V,t as D,F as B}from"./vee-validate-zod-CppCHWBl.js";import{_ as P}from"./TabulatorTable.vue_vue_type_script_setup_true_lang-CJSfjonO.js";import{_ as j,a as q,b as z,c as A}from"./FormMessage.vue_vue_type_script_setup_true_lang-DRP7AwgQ.js";import{d as E,A as p,n as G,a as L,e,w as s,u as t,z as O,F as U,o as H,b as d,h as m,l as I}from"./app-X6IBNoOp.js";const J=$({id:v().nullable(),name:h()}),Q=J,W=["onSubmit"],X={class:"w-full flex gap-1"},ra=E({__name:"ClassRoom",setup(Y){const n=p({data:[],loading:!0}),i=p(!1);G(async()=>{n.value.loading=!0;const l=await u.classRoom.index();l.data&&(n.value.data=l.data.map(a=>({...a,actions:[{href:`/setting/class-room/${a.id}/edit`,button:{buttonType:"edit"}},{href:`/setting/class-room/${a.id}`,button:{buttonType:"delete"}}]}))),n.value.loading=!1});const c=[{field:"actions",headerSort:!1},{title:"Nama",field:"name",sorter:"string",headerFilter:"input",headerFilterPlaceholder:"Cari berdasarkan nama"},{title:"Layanan",field:"service.name",sorter:"string",headerFilter:"input",headerFilterPlaceholder:"Cari berdasarkan layanan"},{title:"Kapasitas Kasur",field:"capacity",sorter:"number"},{title:"Dibuat pada",field:"created_at",sorter:"string"}],_=D(Q);async function g(l){r.loading("Master kelas ruangan dalam penyimpanan...");try{const a=await u.classRoom.store(l);a.data&&(r.success("Master kelas ruangan berhasil disimpan"),n.value.data.unshift({...a.data,actions:[{href:`/setting/class-room/${a.data.id}`,button:{buttonType:"edit"}},{href:`/setting/class-room/${a.data.id}`,button:{buttonType:"delete"}}]}),i.value=!1)}catch(a){r.error("Gagal menyimpan data kelas ruangan"),console.error(a)}setTimeout(()=>{r.dismiss()},3e3)}return(l,a)=>(H(),L(U,null,[e(t(B),{as:"","validation-schema":t(_),class:"flex flex-col gap-2"},{default:s(({handleSubmit:b})=>[e(t(k),{open:i.value,"onUpdate:open":a[0]||(a[0]=o=>i.value=o)},{default:s(()=>[e(t(F),{class:"2xl:max-w-[800px] max-h-[90dvh]"},{"dialog-title":s(()=>[e(t(T),null,{default:s(()=>a[2]||(a[2]=[m("Formulir Master Kelas Ruangan")])),_:1}),e(t(C),{class:"overflow-auto"},{default:s(()=>a[3]||(a[3]=[d("p",{class:"text-sm font-light text-gray-500"}," Data kelas ruangan menjadi sifat bagi data ruangan terutama digunakan pada rawat inap dan VK. ",-1)])),_:1})]),default:s(()=>[d("form",{id:"classRoomForm",onSubmit:o=>b(o,g)},[e(t(V),{name:"name"},{default:s(({componentField:o})=>[e(t(j),null,{default:s(()=>[e(t(q),{required:!0},{default:s(()=>a[4]||(a[4]=[m("Nama Kelas")])),_:1}),e(t(z),null,{default:s(()=>[e(t(x),I({type:"text"},o,{class:"border px-3 py-2 rounded-md",placeholder:"Masukkan Nama Kelas",autocomplete:"off",required:""}),null,16)]),_:2},1024),e(t(A))]),_:2},1024)]),_:1})],40,W),e(t(w),null,{default:s(()=>[e(f,{type:"submit",buttonType:"save",form:"classRoomForm"},{default:s(()=>a[5]||(a[5]=[m(" Simpan ")])),_:1})]),_:1})]),_:2},1024)]),_:2},1032,["open"])]),_:1},8,["validation-schema"]),e(t(N),{class:O(t(y)("w-full",l.$attrs.class??""))},{default:s(()=>[e(t(R),null,{default:s(()=>[e(t(S),null,{default:s(()=>a[6]||(a[6]=[m("Master Kelas Ruangan")])),_:1}),e(t(K),null,{default:s(()=>[d("div",X,[a[7]||(a[7]=d("span",null,"Digunakan di rawat inap dan VK, dan memiliki kapasitas tempat tidur dan harga sewa per malam",-1)),e(f,{type:"button",buttonType:"add",href:"/setting/class-room/create",onClick:a[1]||(a[1]=()=>{i.value=!0})})])]),_:1})]),_:1}),e(t(M),{class:"grid gap-4"},{default:s(()=>[e(P,{usingFilter:!1,loading:n.value.loading,data:n.value.data,columns:c,id:"setting-class-room","tabulator-class":"!h-[400px]",options:{}},null,8,["loading","data"])]),_:1})]),_:1},8,["class"])],64))}});export{ra as _};
